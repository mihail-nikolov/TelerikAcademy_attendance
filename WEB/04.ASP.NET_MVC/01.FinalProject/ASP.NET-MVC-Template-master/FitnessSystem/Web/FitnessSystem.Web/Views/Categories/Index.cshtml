@model IEnumerable<FitnessSystem.Web.ViewModels.Categories.CategoryWithExercisesViewModel>
@{
    ViewBag.Title = "Categories";
}

<h2>Categories</h2>
<div id="toUpdate">
    @Ajax.ActionLink("Create new", "CreateNew", "Categories", new AjaxOptions
{
    UpdateTargetId = "toUpdate",
    InsertionMode = InsertionMode.Replace
},
    new
    {
        @class = "btn btn-primary"
    })
</div>

@foreach (var category in Model)
{
    <h3><a href="~/Categories/Details/@category.Id">@category.Name</a></h3>
    if (category.Exercises.Count != 0)
    {
        foreach (var exercise in category.Exercises)
        {
            <div class="row">
                <h4><a href="~/Exercises/Details/@exercise.Id">@exercise.Title</a></h4>
            </div>
            <div class="row">
                <i>rating:</i><strong class="text-danger">@exercise.Votes</strong>
                <i>category:</i><a href="~/Exercises?categoryId=@exercise.CategoryId"><strong>@exercise.Category</strong></a>
                <i>author:</i><a href="~/Exercises?authorId=@exercise.AuthorId"><strong>@exercise.Author</strong></a>
            </div>
            <br />
        }
    }
    else
    {
        <div class="row text-danger">
            No Exercises Added in This category
        </div>
    }
}


@section scripts{
    @Scripts.Render("~/bundles/jquery")
<script src="@Url.Content("~/Scripts/jquery.unobtrusive-ajax.js")" type="text/javascript"></script>
}
